Sep-10 18:15:01.836 [main] DEBUG nextflow.cli.Launcher - $> nextflow run -c /home/ubuntu/parabricks-nextflow/config/local.nf.conf -params-file /home/ubuntu/parabricks-nextflow/example_inputs/test.fq2bam.json /home/ubuntu/parabricks-nextflow/nextflow/fq2bam.nf
Sep-10 18:15:01.922 [main] DEBUG nextflow.cli.CmdRun - N E X T F L O W  ~  version 24.04.4
Sep-10 18:15:01.950 [main] DEBUG nextflow.plugin.PluginsFacade - Setting up plugin manager > mode=prod; embedded=false; plugins-dir=/home/ubuntu/.nextflow/plugins; core-plugins: nf-amazon@2.5.3,nf-azure@1.6.1,nf-cloudcache@0.4.1,nf-codecommit@0.2.1,nf-console@1.1.3,nf-ga4gh@1.3.0,nf-google@1.13.2-patch1,nf-tower@1.9.1,nf-wave@1.4.2-patch1
Sep-10 18:15:01.963 [main] INFO  o.pf4j.DefaultPluginStatusProvider - Enabled plugins: []
Sep-10 18:15:01.964 [main] INFO  o.pf4j.DefaultPluginStatusProvider - Disabled plugins: []
Sep-10 18:15:01.968 [main] INFO  org.pf4j.DefaultPluginManager - PF4J version 3.12.0 in 'deployment' mode
Sep-10 18:15:01.983 [main] INFO  org.pf4j.AbstractPluginManager - No plugins
Sep-10 18:15:02.014 [main] DEBUG nextflow.config.ConfigBuilder - User config file: /home/ubuntu/parabricks-nextflow/config/local.nf.conf
Sep-10 18:15:02.016 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /home/ubuntu/parabricks-nextflow/config/local.nf.conf
Sep-10 18:15:02.048 [main] DEBUG n.secret.LocalSecretsProvider - Secrets store: /home/ubuntu/.nextflow/secrets/store.json
Sep-10 18:15:02.052 [main] DEBUG nextflow.secret.SecretsLoader - Discovered secrets providers: [nextflow.secret.LocalSecretsProvider@58a120b0] - activable => nextflow.secret.LocalSecretsProvider@58a120b0
Sep-10 18:15:02.076 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `standard`
Sep-10 18:15:02.667 [main] DEBUG nextflow.cli.CmdRun - Applied DSL=2 from script declaration
Sep-10 18:15:02.684 [main] DEBUG nextflow.cli.CmdRun - Launching `/home/ubuntu/parabricks-nextflow/nextflow/fq2bam.nf` [hopeful_almeida] DSL2 - revision: 2ed597d400
Sep-10 18:15:02.686 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins default=[]
Sep-10 18:15:02.686 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins resolved requirement=[]
Sep-10 18:15:02.752 [main] DEBUG nextflow.Session - Session UUID: 308349ce-17a3-45ae-86c4-82a2d8d48ec8
Sep-10 18:15:02.752 [main] DEBUG nextflow.Session - Run name: hopeful_almeida
Sep-10 18:15:02.752 [main] DEBUG nextflow.Session - Executor pool size: 64
Sep-10 18:15:02.762 [main] DEBUG nextflow.file.FilePorter - File porter settings maxRetries=3; maxTransfers=50; pollTimeout=null
Sep-10 18:15:02.768 [main] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'FileTransfer' minSize=10; maxSize=192; workQueue=LinkedBlockingQueue[10000]; allowCoreThreadTimeout=false
Sep-10 18:15:02.796 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 24.04.4 build 5917
  Created: 01-08-2024 07:05 UTC 
  System: Linux 6.5.0-1024-aws
  Runtime: Groovy 4.0.21 on OpenJDK 64-Bit Server VM 11.0.24+8-LTS
  Encoding: UTF-8 (UTF-8)
  Process: 9659@ip-10-0-20-168 [10.0.20.168]
  CPUs: 64 - Mem: 249.2 GB (231.3 GB) - Swap: 0 (0)
Sep-10 18:15:02.824 [main] DEBUG nextflow.Session - Work-dir: /home/ubuntu/parabricks-nextflow/test/work [ext2/ext3]
Sep-10 18:15:02.824 [main] DEBUG nextflow.Session - Script base path does not exist or is not a directory: /home/ubuntu/parabricks-nextflow/nextflow/bin
Sep-10 18:15:02.841 [main] DEBUG nextflow.executor.ExecutorFactory - Extension executors providers=[]
Sep-10 18:15:02.857 [main] DEBUG nextflow.Session - Observer factory: DefaultObserverFactory
Sep-10 18:15:02.888 [main] DEBUG nextflow.cache.CacheFactory - Using Nextflow cache factory: nextflow.cache.DefaultCacheFactory
Sep-10 18:15:02.910 [main] DEBUG nextflow.util.CustomThreadPool - Creating default thread pool > poolSize: 65; maxThreads: 1000
Sep-10 18:15:02.981 [main] DEBUG nextflow.Session - Session start
Sep-10 18:15:03.236 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Sep-10 18:15:03.343 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Sep-10 18:15:03.343 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Sep-10 18:15:03.350 [main] DEBUG nextflow.executor.Executor - [warm up] executor > local
Sep-10 18:15:03.357 [main] DEBUG n.processor.LocalPollingMonitor - Creating local task monitor for executor 'local' > cpus=64; memory=249.2 GB; capacity=64; pollInterval=100ms; dumpInterval=5m
Sep-10 18:15:03.360 [main] DEBUG n.processor.TaskPollingMonitor - >>> barrier register (monitor: local)
Sep-10 18:15:03.470 [main] DEBUG nextflow.Session - Workflow process names [dsl2]: fq2bam, ClaraParabricks_fq2bam:fq2bam
Sep-10 18:15:03.471 [main] DEBUG nextflow.Session - Igniting dataflow network (1)
Sep-10 18:15:03.472 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > ClaraParabricks_fq2bam:fq2bam
Sep-10 18:15:03.473 [main] DEBUG nextflow.script.ScriptRunner - Parsed script files:
  Script_4637e4507e3c65ef: /home/ubuntu/parabricks-nextflow/nextflow/fq2bam.nf
Sep-10 18:15:03.474 [main] DEBUG nextflow.script.ScriptRunner - > Awaiting termination 
Sep-10 18:15:03.474 [main] DEBUG nextflow.Session - Session await
Sep-10 18:15:03.739 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Sep-10 18:15:03.742 [Task submitter] INFO  nextflow.Session - [60/8bf88c] Submitted process > ClaraParabricks_fq2bam:fq2bam
Sep-10 18:18:36.954 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 1; name: ClaraParabricks_fq2bam:fq2bam; status: COMPLETED; exit: 255; error: -; workDir: /home/ubuntu/parabricks-nextflow/test/work/60/8bf88c0adfeb9ec44bd27589d32640]
Sep-10 18:18:36.956 [Task monitor] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'TaskFinalizer' minSize=10; maxSize=192; workQueue=LinkedBlockingQueue[10000]; allowCoreThreadTimeout=false
Sep-10 18:18:36.977 [TaskFinalizer-1] DEBUG nextflow.processor.TaskProcessor - Handling unexpected condition for
  task: name=ClaraParabricks_fq2bam:fq2bam; work-dir=/home/ubuntu/parabricks-nextflow/test/work/60/8bf88c0adfeb9ec44bd27589d32640
  error [nextflow.exception.ProcessFailedException]: Process `ClaraParabricks_fq2bam:fq2bam` terminated with an error exit status (255)
Sep-10 18:18:37.000 [TaskFinalizer-1] ERROR nextflow.processor.TaskProcessor - Error executing process > 'ClaraParabricks_fq2bam:fq2bam'

Caused by:
  Process `ClaraParabricks_fq2bam:fq2bam` terminated with an error exit status (255)


Command executed:

  pbrun fq2bam     --in-fq sample_1.fq.gz sample_2.fq.gz     --ref Homo_sapiens_assembly38.fasta     --out-bam sample_1.fq.pb.bam     --knownSites Homo_sapiens_assembly38.known_indels.vcf.gz     --out-recal-file sample_1.fq.pb.BQSR-REPORT.txt

Command exit status:
  255

Command output:
  
  [Parabricks Options Mesg]: Checking argument compatibility
  [Parabricks Options Mesg]: Automatically generating ID prefix
  [Parabricks Options Mesg]: Read group created for /home/ubuntu/parabricks_sample/Data/sample_1.fq.gz and
  /home/ubuntu/parabricks_sample/Data/sample_2.fq.gz
  [Parabricks Options Mesg]: @RG\tID:HK3TJBCX2.1\tLB:lib1\tPL:bar\tSM:sample\tPU:HK3TJBCX2.1
  For technical support visit https://docs.nvidia.com/clara/index.html#parabricks
  Exiting...
  Please visit https://docs.nvidia.com/clara/#parabricks for detailed documentation
  
  
  
  Could not run fq2bam
  Exiting pbrun ...

Command error:
  7a2c55901189: Verifying Checksum
  7a2c55901189: Download complete
  7a2c55901189: Pull complete
  24283ffef4b8: Pull complete
  4f0ee233becc: Pull complete
  d9a9ef6bf4a3: Pull complete
  e9152f275e85: Pull complete
  1cc81720bf61: Pull complete
  d2aa5510e173: Verifying Checksum
  d2aa5510e173: Download complete
  3ca28d06b74d: Pull complete
  d1aadb3be7b6: Verifying Checksum
  d1aadb3be7b6: Download complete
  e26a9a7c6e00: Verifying Checksum
  e26a9a7c6e00: Download complete
  5c889b841413: Verifying Checksum
  5c889b841413: Download complete
  e26a9a7c6e00: Pull complete
  d2aa5510e173: Pull complete
  052672c1ba3f: Verifying Checksum
  052672c1ba3f: Download complete
  052672c1ba3f: Pull complete
  d1aadb3be7b6: Pull complete
  5c889b841413: Pull complete
  Digest: sha256:1dc867aa754c366bc5c61d15440b9bb64c3f8e85fd48b0419b0f7cdcdf4a5708
  Status: Downloaded newer image for nvcr.io/nvidia/clara/clara-parabricks:4.3.0-1
  
  [Parabricks Options Mesg]: Checking argument compatibility
  [Parabricks Options Mesg]: Automatically generating ID prefix
  [Parabricks Options Mesg]: Read group created for /home/ubuntu/parabricks_sample/Data/sample_1.fq.gz and
  /home/ubuntu/parabricks_sample/Data/sample_2.fq.gz
  [Parabricks Options Mesg]: @RG\tID:HK3TJBCX2.1\tLB:lib1\tPL:bar\tSM:sample\tPU:HK3TJBCX2.1
  [PB Info 2024-Sep-10 18:18:25] ------------------------------------------------------------------------------
  [PB Info 2024-Sep-10 18:18:25] ||                 Parabricks accelerated Genomics Pipeline                 ||
  [PB Info 2024-Sep-10 18:18:25] ||                              Version 4.3.0-1                             ||
  [PB Info 2024-Sep-10 18:18:25] ||                       GPU-BWA mem, Sorting Phase-I                       ||
  [PB Info 2024-Sep-10 18:18:25] ------------------------------------------------------------------------------
  [M::bwa_idx_load_from_disk] read 0 ALT contigs
  [PB Info 2024-Sep-10 18:18:30] GPU-BWA mem
  [PB Info 2024-Sep-10 18:18:30] ProgressMeter	Reads		Base Pairs Aligned
  [PB Warning 2024-Sep-10 18:18:35][ParaBricks/src/check_error.cu:41] cudaSafeCall() failed at ParaBricks/src/samGenerator.cu/771: out of memory
  [PB [31mError[0m 2024-Sep-10 18:18:35][ParaBricks/src/check_error.cu:44] No GPUs active, shutting down due to previous error., exiting.
  For technical support visit https://docs.nvidia.com/clara/index.html#parabricks
  Exiting...
  Please visit https://docs.nvidia.com/clara/#parabricks for detailed documentation
  
  
  
  Could not run fq2bam
  Exiting pbrun ...

Work dir:
  /home/ubuntu/parabricks-nextflow/test/work/60/8bf88c0adfeb9ec44bd27589d32640

Tip: you can replicate the issue by changing to the process work dir and entering the command `bash .command.run`
Sep-10 18:18:37.010 [main] DEBUG nextflow.Session - Session await > all processes finished
Sep-10 18:18:37.012 [TaskFinalizer-1] DEBUG nextflow.Session - Session aborted -- Cause: Process `ClaraParabricks_fq2bam:fq2bam` terminated with an error exit status (255)
Sep-10 18:18:37.036 [main] DEBUG nextflow.Session - Session await > all barriers passed
Sep-10 18:18:37.037 [Task monitor] DEBUG n.processor.TaskPollingMonitor - <<< barrier arrives (monitor: local) - terminating tasks monitor poll loop
Sep-10 18:18:37.045 [main] DEBUG n.trace.WorkflowStatsObserver - Workflow completed > WorkflowStats[succeededCount=0; failedCount=1; ignoredCount=0; cachedCount=0; pendingCount=0; submittedCount=0; runningCount=0; retriesCount=0; abortedCount=0; succeedDuration=0ms; failedDuration=3m 33s; cachedDuration=0ms;loadCpus=0; loadMemory=0; peakRunning=1; peakCpus=1; peakMemory=0; ]
Sep-10 18:18:37.222 [main] DEBUG nextflow.cache.CacheDB - Closing CacheDB done
Sep-10 18:18:37.232 [main] DEBUG nextflow.script.ScriptRunner - > Execution complete -- Goodbye
